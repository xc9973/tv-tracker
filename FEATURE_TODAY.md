# 今日更新功能说明

## 新增功能

### 1. 今日更新页面
新增了一个专门的"今日更新"页面，作为网页端的首页，用于查看当天播出的所有剧集。

### 2. 修改资源更新时间
在今日更新页面中，每个剧集都可以直接修改资源更新时间，方便用户根据实际情况调整提醒时间。

## 功能特性

### 页面布局
- **头部信息**：显示当前日期、星期和更新剧集总数
- **剧集卡片**：每个剧集以卡片形式展示
  - 剧集名称
  - 季集信息（如 S01E05）
  - 剧集标题（如果有）
  - 剧集简介
  - 资源更新时间

### 时间修改功能
- 点击"修改"按钮可以编辑资源更新时间
- 输入新的时间（格式如：18:00）
- 点击"保存"确认修改
- 点击"取消"放弃修改
- 修改成功后会显示提示消息并刷新数据

### 响应式设计
- 支持桌面端和移动端自适应
- 移动端优化了布局和按钮大小

## 技术实现

### 前端修改
1. **新增文件**
   - `web/src/pages/Today.tsx` - 今日更新页面组件
   - `web/src/pages/Today.css` - 页面样式

2. **修改文件**
   - `web/src/App.tsx` - 添加路由，将Today设为首页
   - `web/src/components/Layout.tsx` - 更新导航菜单
   - `web/src/services/api.ts` - 添加API接口和类型定义

### 后端修改
1. **修改文件**
   - `internal/repository/episode_repository.go` - 在TodayEpisodeInfo结构中添加show_id字段

### API接口
- `GET /api/today` - 获取今日更新剧集（已有）
- `PUT /api/shows/:id/resource-time` - 更新剧集资源时间（已有）

## 使用方法

### 开发环境测试
```bash
# 进入前端目录
cd web

# 安装依赖（如果还没安装）
npm install

# 启动开发服务器
npm run dev
```

### 生产环境部署
```bash
# 重新构建镜像
docker compose build

# 重启服务
docker compose up -d
```

### 访问页面
1. 打开浏览器访问：`http://localhost/` 或 `http://<NAS_IP>/`
2. 首页即为"今日更新"页面
3. 点击剧集卡片上的"修改"按钮可以修改资源更新时间

## 注意事项

1. **时间格式**：建议使用24小时制格式，如"18:00"、"20:30"等
2. **权限验证**：需要配置正确的WEB_API_TOKEN才能访问API
3. **数据同步**：修改资源时间后，下次同步时会使用新的时间生成任务

## 页面导航

- **今日更新** - 查看当天播出的剧集（新增，首页）
- **任务看板** - 查看待处理的更新和整理任务
- **搜索订阅** - 搜索并订阅新剧集
- **剧集库** - 管理所有已订阅的剧集
